const body=document.body,darkModeToggle=document.getElementById("dark-mode-toggle"),darkModeMediaQuery=window.matchMedia("(prefers-color-scheme: dark)");localStorage.getItem("colorscheme")?setTheme(localStorage.getItem("colorscheme")):setTheme(body.classList.contains("colorscheme-light")||body.classList.contains("colorscheme-dark")?body.classList.contains("colorscheme-dark")?"dark":"light":darkModeMediaQuery.matches?"dark":"light"),darkModeToggle&&darkModeToggle.addEventListener("click",()=>{const e=body.classList.contains("colorscheme-dark")?"light":"dark",t=e==="dark"?"light":"dark";setTheme(e),switchTweetTheme(t,e),rememberTheme(e)}),darkModeMediaQuery.addListener(e=>{setTheme(e.matches?"dark":"light")}),document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".preload-transitions");e.classList.remove("preload-transitions")});function waitForElm(e){return new Promise(t=>{if(document.querySelector(e))return t(document.querySelector(e));const n=new MutationObserver(s=>{document.querySelector(e)&&(t(document.querySelector(e)),n.disconnect())});n.observe(document.body,{childList:!0,subtree:!0})})}function setTheme(e){body.classList.remove("colorscheme-auto");let t=e==="dark"?"light":"dark";if(body.classList.remove("colorscheme-"+t),body.classList.add("colorscheme-"+e),document.documentElement.style["color-scheme"]=e,e==="dark"){const e={type:"set-theme",theme:"github-dark"};waitForElm(".utterances-frame").then(t=>{t.contentWindow.postMessage(e,"https://utteranc.es")})}else{const e={type:"set-theme",theme:"github-light"};waitForElm(".utterances-frame").then(t=>{t.contentWindow.postMessage(e,"https://utteranc.es")})}}waitForElm("[data-tweet-id]").then(()=>{const e=localStorage.getItem("colorscheme")|"dark",t=e==="dark"?"light":"dark";switchTweetTheme(t,e)});function switchTweetTheme(e,t){var n=document.querySelectorAll("[data-tweet-id]");n.forEach(function(n){var s=n.getAttribute("src");n.setAttribute("src",s.replace("theme="+e,"theme="+t))})}function rememberTheme(e){localStorage.setItem("colorscheme",e)}